<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    
    <!-- SEO Meta Tags -->
    <title>Chickabees Honey - Fresh Raw Honey & Farm Provisions | Oakland, CA</title>
    <meta name="description" content="Order fresh farm provisions from Oakland's Chickabees Honey. Raw honey, farm eggs, baked goods & seasonal produce. Supporting sustainable farming & children's education. Free pickup with coffee & waffles!">
    <meta name="keywords" content="raw honey Oakland, farm fresh eggs, sustainable farming, local honey, farm provisions, Oakland farm, beekeeping, chickens, organic">
    <meta name="author" content="Chickabees Honey">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://chickabeesoakland.com">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://chickabeesoakland.com">
    <meta property="og:title" content="Chickabees Honey - Fresh Raw Honey & Farm Provisions | Oakland, CA">
    <meta property="og:description" content="Order fresh farm provisions from Oakland's Chickabees Honey. Raw honey, farm eggs, baked goods & seasonal produce. Supporting sustainable farming & children's education.">
    <meta property="og:image" content="https://chickabeesoakland.com/images/chickabees-og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Chickabees Honey">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://chickabeesoakland.com">
    <meta property="twitter:title" content="Chickabees Honey - Fresh Raw Honey & Farm Provisions | Oakland, CA">
    <meta property="twitter:description" content="Order fresh farm provisions from Oakland's Chickabees Honey. Raw honey, farm eggs, baked goods & seasonal produce. Supporting sustainable farming & children's education.">
    <meta property="twitter:image" content="https://chickabeesoakland.com/images/chickabees-og-image.jpg">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#f5e6a3">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Chickabees Honey">
    <link rel="manifest" href="/manifest.json">
    
    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-19BV0QPP7Z"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        
        gtag('config', 'G-19BV0QPP7Z');
    </script>
    
    <!-- Local Business Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "Chickabees Honey",
        "description": "Family farm providing fresh raw honey, eggs, and seasonal provisions in Oakland, CA",
        "url": "https://chickabeesoakland.com",
        "email": "hello@chickabeesoakland.com",
        "address": {
            "@type": "PostalAddress",
            "addressLocality": "Oakland",
            "addressRegion": "CA",
            "addressCountry": "US"
        },
        "geo": {
            "@type": "GeoCoordinates",
            "latitude": "37.8044",
            "longitude": "-122.2712"
        },
        "openingHours": "Su 09:00-11:00",
        "priceRange": "$20-$40",
        "paymentAccepted": "Venmo",
        "hasOfferCatalog": {
            "@type": "OfferCatalog",
            "name": "Farm Provisions",
            "itemListElement": [
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Product",
                        "name": "The Birds Box",
                        "description": "12 fresh eggs, 10oz wildflower honey, jar of granola, sourdough loaf, canvas tote, monthly guide",
                        "offers": {
                            "@type": "Offer",
                            "price": "40.00",
                            "priceCurrency": "USD"
                        }
                    }
                },
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Product",
                        "name": "The Bees Box",
                        "description": "20oz wildflower honey, canvas tote, monthly guide",
                        "offers": {
                            "@type": "Offer",
                            "price": "20.00",
                            "priceCurrency": "USD"
                        }
                    }
                }
            ]
        },
        "areaServed": {
            "@type": "GeoCircle",
            "geoMidpoint": {
                "@type": "GeoCoordinates",
                "latitude": "37.8044",
                "longitude": "-122.2712"
            },
            "geoRadius": "30000"
        },
        "sameAs": [
            "https://instagram.com/chickabeesoakland"
        ]
    }
    </script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-19BV0QPP7Z"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-19BV0QPP7Z', {
            custom_map: {
                'custom_parameter_1': 'order_value',
                'custom_parameter_2': 'box_type'
            }
        });
        
        // Enhanced event tracking
        function trackEvent(eventName, parameters = {}) {
            gtag('event', eventName, {
                event_category: 'engagement',
                event_label: parameters.label || '',
                value: parameters.value || 0,
                ...parameters
            });
        }

        // Track enhanced e-commerce events
        function trackPurchase(orderData) {
            gtag('event', 'purchase', {
                transaction_id: orderData.transaction_id,
                value: orderData.value,
                currency: 'USD',
                items: orderData.items
            });
        }

        function trackAddToCart(itemData) {
            gtag('event', 'add_to_cart', {
                currency: 'USD',
                value: itemData.value,
                items: [itemData]
            });
        }
        
        // Track page load performance
        window.addEventListener('load', function() {
            setTimeout(function() {
                const navigation = performance.getEntriesByType('navigation')[0];
                gtag('event', 'page_load_time', {
                    event_category: 'performance',
                    value: Math.round(navigation.loadEventEnd - navigation.fetchStart),
                    custom_parameter: 'load_time_ms'
                });
            }, 0);
        });

        // Track scroll depth
        let maxScroll = 0;
        window.addEventListener('scroll', function() {
            const scrollPercent = Math.round((window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100);
            if (scrollPercent > maxScroll && scrollPercent % 25 === 0) {
                maxScroll = scrollPercent;
                gtag('event', 'scroll_depth', {
                    event_category: 'engagement',
                    value: scrollPercent
                });
            }
        });
    </script>

    <!-- Preload Critical Resources -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&display=swap"></noscript>
    
    <!-- Preload key images -->
    <link rel="preload" as="image" href="images/circle-logo.png">
    <link rel="preload" as="image" href="qr_code_chickabees.jpg">
    
    <!-- Critical CSS - Inlined for performance -->
    <style>
        /* Enhanced Design Tokens - Integrated from prototype */
        :root {
          /* Colors - Farm Theme */
          --color-honey: #f5e6a3;
          --color-honey-dark: #e6d482;
          --color-meadow: #7fb069;
          --color-meadow-dark: #6a9956;
          --color-earth: #8b7355;
          --color-earth-light: #a68b6b;
          --color-cream: #fefcf3;
          --color-charcoal: #2c2c2c;
          --color-warm-white: #fffef9;
          
          /* Neutral Scale */
          --color-gray-50: #fafaf9;
          --color-gray-100: #f5f5f4;
          --color-gray-200: #e7e5e4;
          --color-gray-300: #d6d3d1;
          --color-gray-400: #a8a29e;
          --color-gray-500: #78716c;
          --color-gray-600: #57534e;
          --color-gray-700: #44403c;
          --color-gray-800: #292524;
          --color-gray-900: #1c1917;
          
          /* Typography */
          --font-primary: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;
          --font-display: 'Playfair Display', Georgia, serif;
          
          /* Font Sizes */
          --text-xs: 0.75rem;
          --text-sm: 0.875rem;
          --text-base: 1rem;
          --text-lg: 1.125rem;
          --text-xl: 1.25rem;
          --text-2xl: 1.5rem;
          --text-3xl: 1.875rem;
          --text-4xl: 2.25rem;
          --text-5xl: 3rem;
          
          /* Spacing */
          --space-1: 0.25rem;
          --space-2: 0.5rem;
          --space-3: 0.75rem;
          --space-4: 1rem;
          --space-5: 1.25rem;
          --space-6: 1.5rem;
          --space-8: 2rem;
          --space-10: 2.5rem;
          --space-12: 3rem;
          --space-16: 4rem;
          --space-20: 5rem;
          
          /* Borders */
          --border-radius-sm: 0.25rem;
          --border-radius: 0.5rem;
          --border-radius-lg: 0.75rem;
          --border-radius-xl: 1rem;
          --border-radius-full: 9999px;
          
          /* Shadows */
          --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
          --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
          --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
          --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
          --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }

        /* Critical above-the-fold styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-primary);
            line-height: 1.6;
            color: var(--color-charcoal);
            background-color: var(--color-warm-white);
            font-size: var(--text-base);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header - Critical for first paint */
        header {
            background: #faf9f7;
            padding: 15px 0;
            border-bottom: 1px solid #e8e6e1;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            min-height: 80px;
            gap: 15px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-circle {
            width: 60px;
            height: 60px;
            background: #f5e6a3;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #1a1a1a;
            flex-shrink: 0;
        }

        .logo-text h1 {
            font-family: var(--font-display);
            font-size: var(--text-2xl);
            font-weight: 600;
            color: var(--color-charcoal);
            margin-bottom: 2px;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .logo-text p {
            font-style: italic;
            color: #666;
            font-size: 0.75rem;
            letter-spacing: 0.5px;
            display: none;
        }

        /* Hero - Critical for first contentful paint */
        .hero {
            background: linear-gradient(rgba(245, 230, 163, 0.3), rgba(245, 230, 163, 0.3));
            padding: 40px 0;
            text-align: center;
            border-bottom: 1px solid #e8e6e1;
        }

        .hero h2 {
            font-family: var(--font-display);
            font-size: var(--text-3xl);
            color: var(--color-charcoal);
            margin-bottom: 20px;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: capitalize;
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 30px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
            padding: 0 10px;
        }
        
        /* Holiday Banner */
        .holiday-banner {
            background: linear-gradient(135deg, #8FBC8F, #F0E68C);
            padding: 25px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .holiday-banner p {
            color: white;
            font-size: 1.2rem;
            margin-bottom: 15px;
            font-weight: 500;
            letter-spacing: 0.5px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }
        .holiday-cta {
            display: inline-block;
            background: white;
            color: #C65D00;
            padding: 12px 35px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            border: 3px solid white;
            border-radius: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            position: relative;
            z-index: 1;
        }
        .holiday-cta:hover {
            background: transparent;
            color: white;
        }

        /* Skip Link for accessibility */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: #1a1a1a;
            color: white;
            padding: 8px;
            text-decoration: none;
            z-index: 1000;
            border-radius: 4px;
        }

        .skip-link:focus {
            top: 6px;
        }
    </style>

    <style>
        /* Mobile Navigation */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            cursor: pointer;
            padding: 10px;
            margin-right: -10px;
            -webkit-tap-highlight-color: transparent;
        }

        .mobile-menu-toggle span {
            display: block;
            width: 25px;
            height: 2px;
            background: #1a1a1a;
            margin: 5px 0;
            transition: all 0.3s ease;
        }

        .mobile-menu-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .mobile-menu-toggle.active span:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }

        nav {
            width: 100%;
        }

        nav ul {
            list-style: none;
            display: flex;
            gap: 30px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        nav a {
            text-decoration: none;
            color: #1a1a1a;
            font-weight: 400;
            font-size: 0.9rem;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            transition: color 0.3s;
            position: relative;
            padding: 5px 10px;
            display: block;
            -webkit-tap-highlight-color: transparent;
        }

        nav a:hover,
        nav a:focus {
            color: #666;
            outline: 2px solid #1a1a1a;
            outline-offset: 2px;
        }

        /* Newsletter Banner */
        .newsletter-banner {
            background: linear-gradient(135deg, #f5e6a3 0%, #e8d789 100%);
            padding: 15px 0;
            border-bottom: 1px solid #e8e6e1;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s ease-out;
            position: relative;
            z-index: 90;
        }

        .newsletter-banner.hidden {
            transform: translateY(-100%);
        }

        .newsletter-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            flex-wrap: wrap;
        }

        .newsletter-text {
            flex: 1;
            min-width: 200px;
        }

        .newsletter-text h3 {
            font-size: 1.1rem;
            color: #1a1a1a;
            margin-bottom: 3px;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .newsletter-text p {
            color: #666;
            font-size: 0.8rem;
            line-height: 1.3;
        }

        .newsletter-form {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-shrink: 0;
            width: 100%;
            max-width: 350px;
        }

        .newsletter-form input {
            padding: 10px 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            flex: 1;
            font-family: inherit;
            min-width: 0;
        }

        .newsletter-form input:focus {
            outline: none;
            border-color: #1a1a1a;
            box-shadow: 0 0 0 3px rgba(26, 26, 26, 0.1);
        }

        .newsletter-form button {
            padding: 10px 16px;
            background: #1a1a1a;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            letter-spacing: 0.5px;
            font-family: inherit;
            white-space: nowrap;
            -webkit-tap-highlight-color: transparent;
            min-height: 44px;
        }

        .newsletter-form button:hover,
        .newsletter-form button:focus {
            background: #333;
            outline: 2px solid #fff;
            outline-offset: 2px;
        }

        .newsletter-close {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 24px;
            color: #666;
            cursor: pointer;
            padding: 5px;
            line-height: 1;
            -webkit-tap-highlight-color: transparent;
            min-width: 44px;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .newsletter-close:hover,
        .newsletter-close:focus {
            color: #1a1a1a;
            outline: 2px solid #1a1a1a;
            outline-offset: 2px;
        }

        /* Order Section */
        .order-section {
            padding: 40px 0;
            background: #fff;
            position: relative;
        }

        .order-form {
            background: #faf9f7;
            border: 1px solid #e8e6e1;
            padding: 30px 20px;
            max-width: 900px;
            margin: 0 auto;
        }

        .order-form h3 {
            font-size: 2rem;
            color: #1a1a1a;
            margin-bottom: 30px;
            text-align: center;
            font-weight: 300;
            letter-spacing: 1px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-size: 0.9rem;
            font-weight: 400;
            color: #1a1a1a;
            margin-bottom: 10px;
            letter-spacing: 0.5px;
        }

        .form-group select,
        .form-group input,
        .form-group textarea {
            padding: 12px;
            border: 1px solid #e8e6e1;
            background: white;
            font-size: 16px;
            font-family: inherit;
            color: #1a1a1a;
            border-radius: 4px;
            -webkit-appearance: none;
            appearance: none;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        .form-group select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23333' d='M10.293 3.293L6 7.586 1.707 3.293A1 1 0 00.293 4.707l5 5a1 1 0 001.414 0l5-5a1 1 0 10-1.414-1.414z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            padding-right: 35px;
        }

        .form-group select:focus,
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #1a1a1a;
            box-shadow: 0 0 0 3px rgba(26, 26, 26, 0.1);
        }

        /* Form validation styles */
        .form-group input:invalid,
        .form-group textarea:invalid,
        .form-group select:invalid {
            border-color: #e74c3c;
        }

        .form-group input:valid,
        .form-group textarea:valid,
        .form-group select:valid {
            border-color: #27ae60;
        }

        .error-message {
            color: #e74c3c;
            font-size: 0.8rem;
            margin-top: 5px;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        .success-message {
            color: #27ae60;
            font-size: 0.8rem;
            margin-top: 5px;
            display: none;
        }

        .success-message.show {
            display: block;
        }

        .box-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .box-option {
            border: 2px solid #e8e6e1;
            padding: 25px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
            position: relative;
            -webkit-tap-highlight-color: transparent;
        }

        .box-option:hover,
        .box-option:focus,
        .box-option.selected {
            border-color: #1a1a1a;
            background: #faf9f7;
            outline: none;
        }

        .box-option:focus {
            box-shadow: 0 0 0 3px rgba(26, 26, 26, 0.1);
        }

        .box-option h4 {
            font-size: 1.4rem;
            color: #1a1a1a;
            margin-bottom: 10px;
            font-weight: 300;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .box-option .price {
            font-size: 2rem;
            font-weight: 300;
            color: #1a1a1a;
            margin-bottom: 15px;
            letter-spacing: 0.5px;
        }

        .box-option ul {
            list-style: none;
        }

        .box-option li {
            padding: 6px 0;
            color: #666;
            font-size: 0.9rem;
            border-bottom: 1px solid #f0f0f0;
            line-height: 1.4;
        }

        /* Cart Widget Styles */
        .cart-widget {
            background: #f5e6a3;
            border: 2px solid #e8e6e1;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .cart-header {
            display: flex;
            flex-direction: column;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #d4a574;
        }
        
        .cart-header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .cart-header h4 {
            margin: 0;
            color: #1a1a1a;
            font-size: 1.2rem;
            font-weight: 500;
        }

        .cart-total {
            font-size: 1.8rem;
            font-weight: 600;
            color: #1a1a1a;
        }

        .cart-items {
            margin-bottom: 15px;
        }

        .cart-item-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            color: #333;
        }

        .cart-item-name {
            font-size: 0.9rem;
            flex: 1;
        }

        .cart-item-price {
            font-weight: 500;
            color: #1a1a1a;
        }

        .continue-btn {
            background: #1a1a1a;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            width: 100%;
            transition: background 0.3s;
            margin-top: 5px;
        }

        .continue-btn:hover {
            background: #333;
        }

        /* Pickup Schedule Styles */
        .pickup-schedule {
            text-align: center;
        }

        .next-pickup {
            background: #1a1a1a;
            color: white;
            padding: 12px 16px;
            border-radius: 6px;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .next-pickup strong {
            font-size: 1.1rem;
        }

        /* Payment Options Section */
        .payment-options-section {
            background: white;
            border: 1px solid #e8e6e1;
            padding: 25px 20px;
            margin: 25px 0;
        }

        .payment-option-cards {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .payment-card {
            border: 2px solid #e8e6e1;
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .payment-card:hover {
            border-color: #1a1a1a;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .payment-card.selected {
            border-color: #1a1a1a;
            background: #f5e6a3;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .payment-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e8e6e1;
        }

        .payment-card h5 {
            margin: 0;
            font-size: 1.1rem;
            color: #1a1a1a;
            font-weight: 500;
        }

        .payment-amount {
            font-size: 1.3rem;
            font-weight: 600;
            color: #1a1a1a;
        }

        .payment-card-body p {
            margin: 8px 0;
            font-size: 0.9rem;
            color: #666;
        }

        .venmo-option {
            border-color: #3D95CE;
        }

        .venmo-option:hover,
        .venmo-option.selected {
            border-color: #3D95CE;
            background: #e6f3ff;
        }

        .pickup-option {
            border-color: #87A96B;
        }

        .pickup-option:hover,
        .pickup-option.selected {
            border-color: #87A96B;
            background: #f0f8e8;
        }

        .payment-details-container {
            margin-top: 25px;
            padding-top: 25px;
            border-top: 2px solid #e8e6e1;
        }

        .pickup-info-card {
            background: #f5e6a3;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .pickup-date-large {
            background: #1a1a1a;
            color: white;
            padding: 12px 20px;
            border-radius: 6px;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        /* Payment Details */
        .payment-details {
            display: none;
            background: #f5e6a3;
            border: 1px solid #e8e6e1;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
        }

        .payment-details.active {
            display: block;
        }

        /* QR Code specific styles */
        .qr-code-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
        }

        .qr-code-image {
            width: 150px;
            height: auto;
            max-width: 200px;
            border: 2px solid #e8e6e1;
            border-radius: 10px;
            padding: 10px;
            background: white;
            margin-bottom: 15px;
            object-fit: contain;
        }

        .qr-instructions {
            background: white;
            padding: 15px;
            border: 1px solid #e8e6e1;
            border-radius: 5px;
            max-width: 300px;
            text-align: left;
        }

        .qr-instructions ol {
            margin: 10px 0;
            padding-left: 20px;
        }

        .qr-instructions li {
            margin: 5px 0;
            color: #666;
            font-size: 0.85rem;
            line-height: 1.4;
        }

        .delivery-info,
        .pickup-info {
            background: #f5e6a3;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #e8e6e1;
            border-radius: 4px;
        }

        .delivery-info h4,
        .pickup-info h4 {
            color: #1a1a1a;
            margin-bottom: 10px;
            font-size: 1.1rem;
            font-weight: 400;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .delivery-info p,
        .pickup-info p {
            color: #666;
            line-height: 1.5;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .add-ons-section {
            margin: 25px 0;
            padding: 20px;
            background: white;
            border: 1px solid #e8e6e1;
            border-radius: 4px;
        }

        .add-ons-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .add-on-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 15px;
            border: 1px solid #e8e6e1;
            background: #faf9f7;
            cursor: pointer;
            transition: all 0.3s;
            -webkit-tap-highlight-color: transparent;
            border-radius: 4px;
        }

        .add-on-item:hover,
        .add-on-item:focus-within {
            border-color: #1a1a1a;
            background: white;
        }

        .add-on-item input[type="checkbox"] {
            margin-top: 3px;
            transform: scale(1.3);
            cursor: pointer;
        }

        .add-on-item input[type="checkbox"]:focus {
            outline: 2px solid #1a1a1a;
            outline-offset: 2px;
        }

        .add-on-details strong {
            color: #1a1a1a;
            font-size: 0.95rem;
            letter-spacing: 0.3px;
        }

        .add-on-details small {
            color: #666;
            font-style: italic;
            line-height: 1.3;
            font-size: 0.85rem;
        }

        .order-btn {
            background: #1a1a1a;
            color: white;
            padding: 16px 30px;
            border: none;
            font-size: 1rem;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 25px;
            letter-spacing: 1px;
            text-transform: uppercase;
            font-family: inherit;
            border-radius: 4px;
            -webkit-tap-highlight-color: transparent;
            min-height: 48px;
        }

        .order-btn:hover,
        .order-btn:focus {
            background: #333;
            outline: 2px solid #fff;
            outline-offset: 2px;
        }

        .order-btn:disabled {
            background: #999;
            cursor: not-allowed;
        }

        .order-btn:disabled:hover,
        .order-btn:disabled:focus {
            background: #999;
            outline: none;
        }

        /* Loading state */
        .order-btn.loading {
            position: relative;
            color: transparent;
        }

        .order-btn.loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            border: 2px solid #fff;
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Order Summary */
        .order-summary {
            background: #f5e6a3;
            border: 1px solid #e8e6e1;
            padding: 20px;
            margin-bottom: 25px;
            text-align: center;
            border-radius: 4px;
        }

        .order-summary h4 {
            color: #1a1a1a;
            margin-bottom: 15px;
            font-size: 1.3rem;
            font-weight: 400;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .order-details {
            background: white;
            padding: 15px;
            border: 1px solid #e8e6e1;
            margin-bottom: 15px;
            border-radius: 4px;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
            font-size: 0.9rem;
        }

        /* Success Message */
        .success-message-banner {
            display: none;
            background: #00b894;
            color: white;
            padding: 20px;
            text-align: center;
            margin-bottom: 25px;
            border-radius: 4px;
            role: alert;
            aria-live: polite;
        }

        .success-message-banner.show {
            display: block;
        }

        .success-message-banner h4 {
            margin-bottom: 10px;
            font-size: 1.3rem;
        }

        /* Social Proof */
        .social-proof {
            background: #fff;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #e8e6e1;
            border-radius: 4px;
            text-align: center;
        }

        .social-proof-item {
            display: inline-block;
            margin: 5px 15px;
            padding: 5px 10px;
            background: #f5e6a3;
            border-radius: 20px;
            font-size: 0.85rem;
            color: #1a1a1a;
        }

        .testimonial {
            background: #f5e6a3;
            padding: 25px;
            margin: 25px 0;
            border: 1px solid #e8e6e1;
            border-radius: 4px;
            text-align: center;
            font-style: italic;
        }

        .testimonial blockquote {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #1a1a1a;
        }

        .testimonial cite {
            font-weight: 500;
            color: #666;
        }

        /* FAQ Section */
        .faq-section {
            background: white;
            padding: 40px 0;
            border-bottom: 1px solid #e8e6e1;
        }

        .faq-item {
            border-bottom: 1px solid #e8e6e1;
            margin-bottom: 20px;
        }

        .faq-question {
            background: none;
            border: none;
            width: 100%;
            text-align: left;
            padding: 20px 0;
            font-size: 1.1rem;
            font-weight: 500;
            color: #1a1a1a;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .faq-question:hover {
            color: #666;
        }

        .faq-answer {
            padding: 0 0 20px 0;
            color: #666;
            line-height: 1.6;
            display: none;
        }

        .faq-answer.active {
            display: block;
        }

        /* Family Story Section */
        .family-story {
            padding: 40px 0;
            background: #faf9f7;
            border-bottom: 1px solid #e8e6e1;
        }

        .origin-story {
            background: white;
            border: 1px solid #e8e6e1;
            padding: 30px 20px;
            margin-bottom: 40px;
            text-align: center;
            border-radius: 4px;
        }

        .origin-story h3 {
            font-size: 2rem;
            color: #1a1a1a;
            margin-bottom: 25px;
            font-weight: 300;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .origin-story p {
            font-size: 1rem;
            color: #666;
            margin-bottom: 20px;
            line-height: 1.7;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }

        .highlight-box {
            background: #f5e6a3;
            padding: 20px;
            margin: 25px auto;
            border: 1px solid #e8e6e1;
            max-width: 700px;
            font-style: italic;
            border-radius: 4px;
        }

        .story-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            align-items: center;
            margin-bottom: 40px;
        }

        .story-text h3 {
            font-size: 1.8rem;
            color: #1a1a1a;
            margin-bottom: 20px;
            font-weight: 300;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .story-text p {
            font-size: 1rem;
            color: #666;
            margin-bottom: 20px;
            line-height: 1.7;
        }

        .story-image {
            background: #e8e6e1;
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-style: italic;
            text-align: center;
            padding: 20px;
            border: 1px solid #d0cec9;
            border-radius: 4px;
            overflow: hidden;
        }

        .story-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Farm Features */
        .farm-features {
            display: grid;
            grid-template-columns: 1fr;
            gap: 25px;
            margin-top: 40px;
        }

        .feature {
            background: white;
            border: 1px solid #e8e6e1;
            padding: 25px;
            text-align: center;
            border-radius: 4px;
        }

        .feature h4 {
            font-size: 1.2rem;
            color: #1a1a1a;
            margin-bottom: 15px;
            font-weight: 300;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .feature p {
            color: #666;
            line-height: 1.6;
            font-size: 0.9rem;
        }

        /* Newsletter Signup */
        .newsletter-signup {
            background: #f5e6a3;
            padding: 25px 20px;
            margin: 30px 0;
            border: 1px solid #e8e6e1;
            text-align: center;
            border-radius: 4px;
        }

        .newsletter-signup h4 {
            color: #1a1a1a;
            margin-bottom: 12px;
            font-size: 1.2rem;
            font-weight: 400;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .newsletter-signup p {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.5;
            font-size: 0.9rem;
        }

        .signup-form {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-width: 400px;
            margin: 0 auto;
            align-items: stretch;
        }

        .signup-form input {
            padding: 12px 15px;
            border: 1px solid #e8e6e1;
            background: white;
            font-size: 16px;
            font-family: inherit;
            border-radius: 4px;
        }

        .signup-form input:focus {
            outline: none;
            border-color: #1a1a1a;
            box-shadow: 0 0 0 3px rgba(26, 26, 26, 0.1);
        }

        .signup-form button {
            background: #1a1a1a;
            color: white;
            padding: 12px 20px;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            letter-spacing: 0.5px;
            font-family: inherit;
            border-radius: 4px;
            min-height: 44px;
            -webkit-tap-highlight-color: transparent;
        }

        .signup-form button:hover,
        .signup-form button:focus {
            background: #333;
            outline: 2px solid #fff;
            outline-offset: 2px;
        }

        /* Products Section */
        .products {
            padding: 50px 0;
            background: white;
            border-bottom: 1px solid #e8e6e1;
        }

        .products h3 {
            font-size: 2rem;
            color: #1a1a1a;
            text-align: center;
            margin-bottom: 40px;
            font-weight: 300;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .product-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 25px;
        }

        .product {
            background: #faf9f7;
            border: 1px solid #e8e6e1;
            padding: 25px;
            text-align: center;
            transition: transform 0.3s;
            border-radius: 4px;
        }

        .product h4 {
            font-size: 1.1rem;
            color: #1a1a1a;
            margin-bottom: 12px;
            font-weight: 300;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .product p {
            color: #666;
            line-height: 1.5;
            font-size: 0.9rem;
        }

        /* Mission Section */
        .mission {
            padding: 40px 0;
            background: #f5e6a3;
            text-align: center;
            border-bottom: 1px solid #e8e6e1;
        }

        .mission h3 {
            font-size: 2rem;
            color: #1a1a1a;
            margin-bottom: 30px;
            font-weight: 300;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .mission p {
            font-size: 1rem;
            color: #666;
            max-width: 900px;
            margin: 0 auto;
            margin-bottom: 20px;
            line-height: 1.7;
            padding: 0 10px;
        }

        /* Footer */
        footer {
            background: #1a1a1a;
            color: white;
            padding: 40px 0;
        }

        .footer-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin-bottom: 30px;
            text-align: center;
        }

        .footer-section h4 {
            margin-bottom: 15px;
            color: #f5e6a3;
            font-size: 1.1rem;
            font-weight: 400;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .footer-section p {
            color: #ccc;
            line-height: 1.6;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .footer-section a {
            color: #f5e6a3;
            text-decoration: none;
        }

        .footer-section a:hover {
            text-decoration: underline;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 25px;
            border-top: 1px solid #333;
            color: #999;
            font-size: 0.85rem;
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .box-option:focus,
            .newsletter-form button:focus,
            .order-btn:focus {
                outline: 3px solid;
                outline-offset: 2px;
            }
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* PWA Installation Banner */
        .install-banner {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: #1a1a1a;
            color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            display: none;
            z-index: 1000;
        }

        .install-banner.show {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .install-banner button {
            background: #f5e6a3;
            color: #1a1a1a;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            margin-left: 10px;
        }

        /* Toast notifications */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #1a1a1a;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 1001;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success {
            background: #00b894;
        }

        .toast.error {
            background: #e74c3c;
        }

        /* Live Chat Widget */
        .chat-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #1a1a1a;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 999;
            transition: transform 0.3s ease;
        }

        .chat-widget:hover {
            transform: scale(1.1);
        }

        /* Mobile Specific Styles */
        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block;
            }

            nav {
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: #faf9f7;
                border-bottom: 1px solid #e8e6e1;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease;
            }

            nav.active {
                max-height: 400px;
            }

            nav ul {
                flex-direction: column;
                gap: 0;
                margin: 0;
                padding: 10px 0;
            }

            nav a {
                padding: 12px 20px;
                border-bottom: 1px solid #f0f0f0;
                min-height: 44px;
                display: flex;
                align-items: center;
            }

            /* Mobile-First Fresh Box Redesign */
            .box-options {
                gap: 20px;
                margin-bottom: 30px;
            }
            
            .box-option {
                background: white;
                border: 3px solid #f0f0f0;
                border-radius: 16px;
                padding: 24px;
                margin-bottom: 16px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.08);
                transition: all 0.3s ease;
                position: relative;
                min-height: auto;
                display: flex;
                flex-direction: column;
            }
            
            
            .box-option h4 {
                font-size: 1.8rem;
                font-weight: 600;
                color: #1a1a1a;
                margin-bottom: 8px;
                letter-spacing: 0.5px;
                text-transform: uppercase;
            }
            
            .box-option .price {
                font-size: 2.4rem;
                font-weight: 700;
                color: #FFD700;
                margin-bottom: 16px;
                text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            }
            
            .box-option p {
                display: none;
            }
            
            .box-option ul {
                margin: 0 0 20px 0;
                padding: 0;
                list-style: none;
            }
            
            .box-option li {
                padding: 10px 0;
                font-size: 1rem;
                line-height: 1.4;
                color: #333;
                border-bottom: 1px solid #f5f5f5;
                position: relative;
                padding-left: 24px;
            }
            
            .box-option li:before {
                content: '✓';
                position: absolute;
                left: 0;
                color: #4CAF50;
                font-weight: bold;
                font-size: 1.1rem;
            }
            
            .box-option li:last-child {
                border-bottom: none;
                margin-bottom: 0;
            }
            
            .box-option:hover,
            .box-option:focus {
                border-color: #FFD700;
                box-shadow: 0 8px 24px rgba(255, 215, 0, 0.2);
                transform: translateY(-2px);
            }
            
            .box-option.selected {
                border-color: #FFD700;
                background: #fffdf0;
                box-shadow: 0 8px 24px rgba(255, 215, 0, 0.25);
                transform: translateY(-2px);
            }
            
            .box-option p:last-of-type {
                display: none;
            }
            
            .order-form h3 {
                font-size: 1.8rem;
                text-align: center;
                margin-bottom: 24px;
                color: #1a1a1a;
                font-weight: 600;
            }
            
            /* Enhanced Touch Feedback */
            .box-option {
                -webkit-tap-highlight-color: transparent;
                user-select: none;
                -webkit-user-select: none;
                -moz-user-select: none;
            }
            
            .box-option:active {
                transform: scale(0.98);
                transition: transform 0.1s ease;
            }
            
            /* Clean Mobile Form Layout */
            .order-form {
                padding: 20px;
                background: #fafafa;
                border-radius: 16px;
                margin-top: 20px;
            }
            
            .box-options legend {
                font-size: 1.1rem;
                font-weight: 600;
                color: #1a1a1a;
                margin-bottom: 16px;
            }

            /* Mobile Touch Target Improvements */
            .order-btn {
                padding: 18px 30px;
                font-size: 1.1rem;
                min-height: 52px;
            }
            
            .add-on-item {
                padding: 15px 20px;
                min-height: 48px;
            }
            
            .add-on-item input[type="checkbox"] {
                width: 22px;
                height: 22px;
            }
            
            .discount-item {
                padding: 15px 20px;
                min-height: 48px;
            }
            
            .discount-item input[type="checkbox"] {
                width: 22px;
                height: 22px;
            }

            .newsletter-content {
                flex-direction: column;
                text-align: center;
            }

            .newsletter-form {
                max-width: none;
            }

            .install-banner {
                flex-direction: column;
                gap: 10px;
            }

            .chat-widget {
                bottom: 90px;
            }
        }

        /* Tablet and up */
        @media (min-width: 769px) {
            .container {
                padding: 0 40px;
            }

            header {
                padding: 30px 0;
            }

            .logo-circle {
                width: 90px;
                height: 90px;
            }

            .logo-text h1 {
                font-size: var(--text-4xl);
                letter-spacing: 3px;
            }

            .logo-text p {
                display: block;
                font-size: 1rem;
                letter-spacing: 1px;
            }

            nav ul {
                gap: 50px;
                margin-top: 0;
            }

            nav a {
                font-size: 1rem;
                letter-spacing: 1px;
                padding: 0;
                min-height: auto;
            }

            .hero {
                padding: 80px 0;
            }

            .hero h2 {
                font-size: var(--text-5xl);
                letter-spacing: 2px;
            }

            .hero p {
                font-size: 1.4rem;
            }

            .order-form {
                padding: 60px;
            }

            .order-form h3 {
                font-size: 2.8rem;
                letter-spacing: 2px;
            }

            .form-row {
                grid-template-columns: 1fr 1fr;
                gap: 40px;
                margin-bottom: 40px;
            }

            .box-options {
                grid-template-columns: 1fr 1fr;
                gap: 30px;
            }

            .box-option {
                padding: 40px;
            }

            .box-option h4 {
                font-size: 1.8rem;
                letter-spacing: 1px;
            }

            .box-option .price {
                font-size: 2.5rem;
                letter-spacing: 1px;
            }

            .add-ons-grid {
                grid-template-columns: 1fr 1fr;
            }

            .story-grid {
                grid-template-columns: 1fr 1fr;
                gap: 60px;
            }

            .story-image {
                height: 600px;
            }

            .farm-features {
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                gap: 40px;
            }

            .product-grid {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 40px;
            }

            .footer-content {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 50px;
                text-align: left;
            }

            .signup-form {
                flex-direction: row;
            }

            .signup-form input {
                flex: 1;
            }

            .signup-form button {
                white-space: nowrap;
            }
        }

        /* Large screens */
        @media (min-width: 1200px) {
            .newsletter-form {
                width: auto;
            }

            .qr-code-image {
                width: 200px;
                height: auto;
                max-width: 250px;
            }
        }

        /* Touch-friendly adjustments */
        @media (pointer: coarse) {
            nav a,
            .box-option,
            .add-on-item,
            .newsletter-form button,
            .order-btn {
                min-height: 44px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
        }

        /* Print styles */
        @media print {
            .newsletter-banner,
            .mobile-menu-toggle,
            nav,
            .newsletter-signup,
            .order-btn,
            .install-banner,
            .toast,
            .chat-widget {
                display: none !important;
            }
            
            * {
                background: white !important;
                color: black !important;
            }
        }

        /* Screen reader only content */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        /* New Shopping Cart System Styles */
        .shopping-cart {
            background: white;
            border: 2px solid #e8e6e1;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e8e6e1;
        }
        
        .cart-header h3 {
            font-size: 1.3rem;
            margin: 0;
            font-weight: 400;
        }
        
        .clear-cart-btn {
            background: none;
            border: none;
            color: #666;
            font-size: 0.9rem;
            cursor: pointer;
            text-decoration: underline;
        }
        
        .cart-items {
            min-height: 60px;
            margin-bottom: 20px;
        }
        
        .empty-cart {
            text-align: center;
            color: #999;
            padding: 20px 0;
        }
        
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .cart-item:last-child {
            border-bottom: none;
        }
        
        .cart-item-info {
            flex: 1;
        }
        
        .cart-item-name {
            font-weight: 500;
            margin-bottom: 2px;
        }
        
        .cart-item-qty {
            font-size: 0.9rem;
            color: #666;
        }
        
        .cart-item-price {
            font-weight: 500;
            margin-left: 15px;
        }
        
        .cart-item-remove {
            background: none;
            border: none;
            color: #999;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 5px;
            margin-left: 10px;
        }
        
        .cart-footer {
            border-top: 2px solid #e8e6e1;
            padding-top: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .cart-total {
            font-size: 1.2rem;
            font-weight: 500;
        }
        
        .checkout-btn {
            background: #f5e6a3;
            border: 2px solid #1a1a1a;
            padding: 12px 30px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 6px;
        }
        
        .checkout-btn:hover:not(:disabled) {
            background: #1a1a1a;
            color: white;
        }
        
        .checkout-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Deadline Warning */
        .deadline-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 30px;
            text-align: center;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .deadline-warning p {
            margin: 0;
            color: #856404;
            font-size: 0.95rem;
        }
        
        /* Product Grid */
        .products-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 40px;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .section-title {
            font-size: 2rem;
            color: #1a1a1a;
            text-align: center;
            margin-bottom: 40px;
            font-weight: 300;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        .main-boxes {
            margin-bottom: 30px;
        }
        
        .product-card {
            background: white;
            border: 2px solid #e8e6e1;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }
        
        .product-card:hover {
            border-color: #1a1a1a;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .product-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .product-header h3 {
            font-size: 1.4rem;
            margin: 0;
            font-weight: 400;
        }
        
        .product-header .price {
            font-size: 1.8rem;
            font-weight: 300;
            color: #1a1a1a;
        }
        
        .stock-indicator {
            margin-bottom: 15px;
            position: relative;
        }
        
        .stock-bar {
            height: 6px;
            background: #e8e6e1;
            border-radius: 3px;
            overflow: hidden;
            position: relative;
        }
        
        .stock-bar::after {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            background: #4CAF50;
            width: var(--stock-width, 100%);
            transition: all 0.3s ease;
        }
        
        .stock-text {
            font-size: 0.85rem;
            color: #666;
            display: block;
            margin-top: 5px;
        }
        
        .product-features {
            list-style: none;
            padding: 0;
            margin: 0 0 20px 0;
        }
        
        .product-features li {
            padding: 5px 0;
            color: #666;
            font-size: 0.95rem;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .product-features li:last-child {
            border-bottom: none;
        }
        
        .product-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .quantity-selector {
            display: flex;
            align-items: center;
            border: 1px solid #e8e6e1;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .qty-btn {
            background: #f0f0f0;
            border: none;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.2s ease;
        }
        
        .qty-btn:hover:not(:disabled) {
            background: #e8e6e1;
        }
        
        .qty-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .qty-input {
            width: 50px;
            text-align: center;
            border: none;
            font-size: 1rem;
            font-weight: 500;
            background: white;
        }
        
        .add-to-cart-btn {
            flex: 1;
            background: #f5e6a3;
            border: 2px solid #1a1a1a;
            padding: 10px 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 6px;
        }
        
        .add-to-cart-btn:hover:not(:disabled) {
            background: #1a1a1a;
            color: white;
        }
        
        .add-to-cart-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Add-ons Section */
        .add-ons-section {
            margin-top: 40px;
        }
        
        .add-ons-title {
            font-size: 1.8rem;
            text-align: center;
            margin-bottom: 30px;
            font-weight: 300;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        .special-badge {
            display: inline-block;
            background: #ff6b6b;
            color: white;
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 4px;
            margin-left: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* Checkout Form */
        .checkout-form {
            background: #faf9f7;
            border: 2px solid #e8e6e1;
            border-radius: 12px;
            padding: 30px;
            margin-top: 40px;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .checkout-form h3 {
            font-size: 1.6rem;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }
        
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #e8e6e1;
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #1a1a1a;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
        }
        
        .checkbox-group label {
            margin-bottom: 0;
            font-weight: normal;
        }
        
        .discount-label {
            color: #4CAF50;
            font-weight: 500;
        }
        
        /* Mobile Cart Drawer */
        @media (max-width: 768px) {
            .shopping-cart {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                transform: translateY(calc(100% - 60px));
                transition: transform 0.3s ease;
                z-index: 100;
                border-radius: 20px 20px 0 0;
                box-shadow: 0 -4px 20px rgba(0,0,0,0.1);
            }
            
            .shopping-cart.expanded {
                transform: translateY(0);
            }
            
            .cart-header {
                cursor: pointer;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .product-card {
                padding: 15px;
            }
            
            .product-header h3 {
                font-size: 1.2rem;
            }
            
            .product-header .price {
                font-size: 1.5rem;
            }
            
            /* Mobile payment cards */
            .payment-option-cards {
                grid-template-columns: 1fr !important;
                gap: 15px;
            }
            
            .payment-card {
                padding: 15px !important;
            }
            
            .payment-card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .payment-amount {
                font-size: 1.5rem !important;
            }
            
            .pickup-date-large {
                padding: 10px 15px !important;
                font-size: 1rem !important;
            }
            
            /* Mobile cart header adjustments */
            .cart-header-top {
                margin-bottom: 10px;
            }
            
            .continue-btn {
                padding: 10px 20px !important;
                font-size: 0.9rem !important;
            }
        }
        
        @media (min-width: 769px) {
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- PWA Install Banner -->
    <div class="install-banner" id="install-banner">
        <span>Install Chickabees Honey for easy access and offline browsing!</span>
        <button onclick="installApp()">Install</button>
        <button onclick="dismissInstall()" style="background: transparent; color: white; margin-left: 5px;">✕</button>
    </div>

    <!-- Toast Notifications -->
    <div class="toast" id="toast"></div>

    <!-- Live Chat Widget (currently hidden) -->
    <div class="chat-widget" onclick="openChat()" title="Chat with us!" aria-label="Open chat support" style="display: none;">
        Chat
    </div>

    <header role="banner">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-circle">
                        <img src="images/circle-logo.png" alt="Chickabees Honey Logo" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                    </div>
                    <div class="logo-text">
                        <h1>CHICKABEES</h1>
                        <p>Raw Honey and Provisions from Oakland, CA</p>
                    </div>
                </div>
                <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <nav id="navigation" role="navigation" aria-label="Main navigation">
                    <ul>
                        <li><a href="#fresh-box">Fresh Box</a></li>
                        <li><a href="gift-shop.html">Gift Shop</a></li>
                        <li><a href="#story">Meet the Family</a></li>
                        <li><a href="#faq">Visit the Farm</a></li>
                        <li><a href="#members-only" onclick="accessMembersPage()">Members Only</a></li>
                        <li><a href="#newsletter-signup">Join</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Newsletter Banner -->
    <div class="newsletter-banner" id="newsletter-banner" role="complementary" aria-label="Newsletter signup">
        <div class="container">
            <button class="newsletter-close" onclick="closeNewsletter()" aria-label="Close newsletter banner">&times;</button>
            <div class="newsletter-content">
                <div class="newsletter-text">
                    <h3>Join Our Farm Family Newsletter</h3>
                    <p>Get first access to seasonal boxes, farm gatherings, and follow the O-Boys' learning journey!</p>
                </div>
                <div class="newsletter-form">
                    <label for="newsletter-email-banner" class="sr-only">Email address for newsletter</label>
                    <input type="email" placeholder="your@email.com" required id="newsletter-email-banner" aria-describedby="newsletter-banner-desc">
                    <button type="button" onclick="handleNewsletterSignup('banner')">Join</button>
                </div>
            </div>
        </div>
        <div class="signup-success" id="newsletter-success-banner" style="display: none; text-align: center; margin-top: 10px; color: #1a1a1a; font-weight: bold;" role="status" aria-live="polite">Opening signup form with your email pre-filled!</div>
    </div>

    <main id="main-content" role="main">
        <section class="hero" aria-label="Welcome message">
            <div class="container">
                <h2>Handcrafted Backyard Orchard Provisions</h2>
                <p>From our family farm to your home. Every harvest teaches our children about sustainable farming, caring for animals, and how our community and ecosystem are connected.</p>
            </div>
        </section>

        <!-- Social Proof Section -->
        <section class="social-proof" aria-label="Customer activity">
            <div class="container">
                <div class="social-proof-item">12 happy chickens</div>
                <div class="social-proof-item">6 beehives producing local natural honey</div>
                <div class="social-proof-item">Free coffee and waffles with pickup</div>
            </div>
        </section>

        <section id="fresh-box" class="order-section" aria-label="Order fresh produce boxes">
            <div class="container">

                <!-- Success Message -->
                <div class="success-message-banner" id="success-message" role="alert" aria-live="assertive">
                    <h4>Order Received Successfully!</h4>
                    <p>Thank you for supporting the O-Boys' future. We'll contact you within 24 hours to confirm your order and arrange payment/delivery details.</p>
                </div>

                
                <form class="order-form" id="order-form" novalidate aria-label="Fresh box order form">
                    <h3>Fresh Box</h3>
                    
                    <fieldset class="box-options" aria-label="Choose your box type">
                        <legend class="sr-only">Select a box option</legend>
                        <div class="box-option" onclick="selectBox('birds')" tabindex="0" role="button" aria-pressed="false" onkeydown="handleBoxKeydown(event, 'birds')">
                            <h4>The Birds</h4>
                            <div class="price" id="birds-price">$40</div>
                            <p style="font-style: italic; color: #666; margin-bottom: 15px;">Farm breakfast essentials</p>
                            <ul>
                                <li>12 Fresh Eggs</li>
                                <li>10oz Wildflower Honey</li>
                                <li>1 Jar Homemade Granola</li>
                                <li>1 Sourdough Loaf</li>
                                <li>Canvas Tote (first order)</li>
                                <li>Monthly Farm Guide</li>
                            </ul>
                            <p style="font-size: 0.85rem; color: #999; margin-top: 10px;">10 available monthly</p>
                        </div>
                        
                        <div class="box-option" onclick="selectBox('bees')" tabindex="0" role="button" aria-pressed="false" onkeydown="handleBoxKeydown(event, 'bees')">
                            <h4>The Bees</h4>
                            <div class="price" id="bees-price">$20</div>
                            <p style="font-style: italic; color: #666; margin-bottom: 15px;">Pure honey goodness - customize with add-ons!</p>
                            <ul>
                                <li>20oz Wildflower Honey</li>
                                <li>Canvas Tote (first order)</li>
                                <li>Monthly Farm Guide</li>
                            </ul>
                            <p style="font-size: 0.85rem; color: #999; margin-top: 10px;">5 available monthly</p>
                        </div>
                    </fieldset>

                    <div class="form-group">
                        <label for="delivery">Delivery Method</label>
                        <select id="delivery" onchange="toggleDeliveryInfo()" required aria-describedby="delivery-error">
                            <option value="pickup">Farm Pickup</option>
                            <option value="delivery">Home Delivery ($5)</option>
                        </select>
                        <div class="error-message" id="delivery-error" role="alert"></div>
                    </div>

                    <div id="pickup-info" class="pickup-info" role="region" aria-label="Pickup information">
                        <h4>Pickup Special</h4>
                        <div class="pickup-schedule">
                            <div class="next-pickup">
                                <strong>Next Pickup: <span id="next-pickup-date">Sunday, December 1st, 9-11am</span></strong>
                            </div>
                            <p style="margin-top: 10px; font-size: 0.85rem;">Pick up during our monthly window and enjoy complimentary coffee and fresh waffles with the family! Please order at least 5 days prior to pickup.</p>
                        </div>
                    </div>

                    <div id="delivery-info" class="delivery-info" style="display: none;" role="region" aria-label="Delivery information">
                        <h4>Delivery Options</h4>
                        <p>Free delivery within 15 minutes drive</p>
                        <p>$20 delivery within 30 minutes drive</p>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="name">Full Name <span aria-label="required">*</span></label>
                            <input type="text" id="name" required aria-describedby="name-error name-success" autocomplete="name">
                            <div class="error-message" id="name-error" role="alert"></div>
                            <div class="success-message" id="name-success"></div>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email Address <span aria-label="required">*</span></label>
                            <input type="email" id="email" required aria-describedby="email-error email-success" autocomplete="email">
                            <div class="error-message" id="email-error" role="alert"></div>
                            <div class="success-message" id="email-success"></div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="phone">Phone Number <span style="color: #999; font-size: 0.9rem;">(optional)</span></label>
                            <input type="tel" id="phone" aria-describedby="phone-error phone-success" autocomplete="tel">
                            <div class="error-message" id="phone-error" role="alert"></div>
                            <div class="success-message" id="phone-success"></div>
                        </div>
                        <div class="form-group" id="address-group" style="display: none;">
                            <label for="address">Delivery Address</label>
                            <textarea id="address" placeholder="123 Main St, Oakland, CA" aria-describedby="address-error address-success" autocomplete="street-address"></textarea>
                            <div class="error-message" id="address-error" role="alert"></div>
                            <div class="success-message" id="address-success"></div>
                        </div>
                    </div>

                    <fieldset class="add-ons-section" aria-label="Optional add-ons">
                        <legend>
                            <h4 style="font-size: 1.2rem; color: #1a1a1a; margin-bottom: 20px; font-weight: 300; letter-spacing: 0.5px; text-align: center;">Add-Ons</h4>
                        </legend>
                        <div class="add-ons-grid">
                            <label class="add-on-item">
                                <input type="checkbox" id="babka-addon" value="20" onchange="updateCartWidget(); updateOrderSummary()" aria-describedby="babka-desc">
                                <span class="add-on-details">
                                    <strong>Chocolate Babka (whole)</strong> - $20<br>
                                    <small id="babka-desc">Homemade chocolate babka loaf (3 available)</small>
                                </span>
                            </label>
                            
                            <label class="add-on-item">
                                <input type="checkbox" id="babka-slice-addon" value="3" onchange="updateCartWidget(); updateOrderSummary()" aria-describedby="babka-slice-desc">
                                <span class="add-on-details">
                                    <strong>Babka Slice</strong> - $3<br>
                                    <small id="babka-slice-desc">Single serving of chocolate babka (10 available)</small>
                                </span>
                            </label>
                            
                            <label class="add-on-item">
                                <input type="checkbox" id="sourdough-addon" value="10" onchange="updateCartWidget(); updateOrderSummary()" aria-describedby="sourdough-desc">
                                <span class="add-on-details">
                                    <strong>Sourdough Loaf</strong> - $10<br>
                                    <small id="sourdough-desc">Artisan sourdough bread (5 available)</small>
                                </span>
                            </label>
                            
                            <label class="add-on-item">
                                <input type="checkbox" id="extra-eggs-addon" value="5" onchange="updateCartWidget(); updateOrderSummary()" aria-describedby="extra-eggs-desc">
                                <span class="add-on-details">
                                    <strong>Extra 6 Eggs</strong> - $5<br>
                                    <small id="extra-eggs-desc">Half dozen farm fresh eggs (10 available)</small>
                                </span>
                            </label>
                            
                            
                            
                            <label class="add-on-item">
                                <input type="checkbox" id="honey-10oz-addon" value="10" onchange="updateCartWidget(); updateOrderSummary()" aria-describedby="honey-10oz-desc">
                                <span class="add-on-details">
                                    <strong>Honey 10oz</strong> - $10<br>
                                    <small id="honey-10oz-desc">Raw unfiltered honey (10 available)</small>
                                </span>
                            </label>
                            
                            
                        </div>
                    </fieldset>

                    <!-- Sustainability Message -->
                    <div class="sustainability-message" style="background: #e8f5e9; padding: 20px; border-radius: 8px; margin: 30px 0; text-align: center;">
                        <h4 style="font-size: 1.2rem; color: #1a1a1a; margin-bottom: 15px; font-weight: 300; letter-spacing: 0.5px;">Sustainability Rewards</h4>
                        <p style="color: #4CAF50; font-weight: 500; margin-bottom: 10px;">Save on your next order!</p>
                        <p style="color: #666; line-height: 1.6;">
                            Please save your clean egg cartons, honey jars, and tote bag to receive discounts on your next order:
                        </p>
                        <ul style="text-align: left; max-width: 400px; margin: 15px auto 0; color: #666; list-style: none;">
                            <li style="padding: 5px 0;">🥚 Return egg cartons - Save $1</li>
                            <li style="padding: 5px 0;">🍯 Return honey jars - Save $1</li>
                            <li style="padding: 5px 0;">👜 Bring your tote bag - Save $5</li>
                        </ul>
                    </div>

                    <!-- Payment Options Section -->
                    <section class="payment-options-section" id="payment-options-section" style="display: none;" aria-label="Payment options">
                        <h4 style="text-align: center; margin-bottom: 25px; font-size: 1.4rem; color: #1a1a1a;">Choose Your Payment Method</h4>
                        
                        <div class="payment-option-cards">
                            <!-- Venmo Option (Primary) -->
                            <div class="payment-card venmo-option" onclick="selectPaymentMethod('venmo')">
                                <div class="payment-card-header">
                                    <h5>Pay Now with Venmo</h5>
                                    <div class="payment-amount">$<span id="venmo-total">0.00</span></div>
                                </div>
                                <div class="payment-card-body">
                                    <p>✓ No processing fees</p>
                                    <p>✓ Secure & instant</p>
                                    <p>✓ Reserve your spot immediately</p>
                                </div>
                            </div>
                            
                            <!-- Pay at Pickup Option (Secondary) -->
                            <div class="payment-card pickup-option" onclick="selectPaymentMethod('pickup')">
                                <div class="payment-card-header">
                                    <h5>Pay at Pickup</h5>
                                    <div class="payment-amount">$<span id="pickup-total">0.00</span></div>
                                </div>
                                <div class="payment-card-body">
                                    <p>💳 Cash or tap-to-pay</p>
                                    <p>📅 <span id="pickup-date-display">Next pickup date</span></p>
                                    <p>☕ Free coffee & waffles included</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Payment Details (Hidden initially) -->
                        <div class="payment-details-container" id="payment-details-container" style="display: none;">
                            <!-- Venmo Details -->
                            <div class="payment-details" id="venmo-details" style="display: none;">
                                <h5 style="text-align: center; margin-bottom: 20px;">Complete Your Venmo Payment</h5>
                                <div class="qr-code-container">
                                    <img src="images/qr_code_chickabees.jpg" alt="Venmo QR Code for @chickabeesoakland" class="qr-code-image" loading="lazy">
                                    <div class="qr-instructions">
                                        <p><strong>How to pay:</strong></p>
                                        <ol>
                                            <li>Open your Venmo app</li>
                                            <li>Tap the scan icon (camera)</li>
                                            <li>Scan this QR code</li>
                                            <li>Enter amount: <strong>$<span id="venmo-amount">0.00</span></strong></li>
                                            <li>Add note: "Chickabees Order - [Your Name]"</li>
                                            <li>Send payment</li>
                                        </ol>
                                        <p style="margin-top: 15px; font-weight: bold; color: #1a1a1a;">Or search: @chickabeesoakland</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Pickup Details -->
                            <div class="payment-details" id="pickup-details" style="display: none;">
                                <h5 style="text-align: center; margin-bottom: 20px;">Pickup Details</h5>
                                <div class="pickup-info-card">
                                    <div class="pickup-date-large">
                                        <strong id="pickup-date-large">Next pickup date will be shown here</strong>
                                    </div>
                                    <p style="margin: 15px 0;">You'll pay <strong>$<span id="pickup-amount-final">0.00</span></strong> when you arrive.</p>
                                    <p>We accept cash or tap-to-pay (credit/debit cards).</p>
                                    <p style="margin-top: 15px; font-style: italic;">Enjoy complimentary coffee and fresh waffles with the family!</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <div class="form-group">
                        <label for="special-requests">Special Requests or Notes</label>
                        <textarea id="special-requests" placeholder="Any allergies, delivery instructions, or questions?" aria-describedby="special-requests-desc"></textarea>
                        <div id="special-requests-desc" class="sr-only">Optional field for any special requests, allergies, or delivery instructions</div>
                    </div>


                    <!-- Real-time Cart Widget -->
                    <div class="cart-widget" id="cart-widget" style="display: none;" aria-label="Your cart">
                        <div class="cart-header">
                            <div class="cart-header-top">
                                <h4>Your Order</h4>
                                <div class="cart-total">$<span id="cart-total">0.00</span></div>
                            </div>
                            <button type="button" class="continue-btn" onclick="showPaymentOptions()">Continue to Payment</button>
                        </div>
                        <div class="cart-items" id="cart-items">
                            <!-- Cart items will be populated here -->
                        </div>
                    </div>

                    <!-- Order Summary (Hidden initially) -->
                    <div class="order-summary" id="order-summary" style="display: none;" aria-label="Order summary">
                        <h4>Your Order Summary</h4>
                        <div class="order-details" id="order-details">
                            <!-- Order items will be populated here -->
                        </div>
                    </div>

                    <div id="late-order-warning" style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; margin: 20px 0; border-radius: 8px; display: none;">
                        <strong style="color: #856404;">⚠️ Late Order Notice</strong>
                        <p style="margin: 10px 0 0 0; color: #856404;">Orders placed after the Thursday deadline may not include babka until next month. We'll email you to confirm availability.</p>
                    </div>

                    <button type="button" class="order-btn" id="order-btn" onclick="processOrder()" disabled aria-describedby="order-btn-status">
                        Select a Box to Continue
                    </button>
                    <div id="order-btn-status" class="sr-only" aria-live="polite"></div>
                </form>

                <!-- Customer Testimonial -->
                <div class="testimonial">
                    <blockquote>"The honey is absolutely incredible, and the kids love seeing where their food comes from. This farm is a treasure!"</blockquote>
                    <cite>- Sarah M., Oakland</cite>
                </div>

                <!-- Newsletter Signup -->
                <section class="newsletter-signup" id="newsletter-signup" aria-label="Newsletter signup">
                    <h4>Want Farm Updates?</h4>
                    <p>Get first access to farm boxes and follow our family's learning journey!</p>
                    <div class="signup-form">
                        <label for="newsletter-email-input" class="sr-only">Email address for newsletter</label>
                        <input type="email" placeholder="your@email.com" required id="newsletter-email-input">
                        <button type="button" onclick="handleNewsletterSignup('main')">Join</button>
                        <div class="signup-success" id="newsletter-success" style="display: none;" role="status" aria-live="polite">Opening signup form with your email pre-filled!</div>
                    </div>
                    <p style="font-size: 0.85rem; color: #666; margin-top: 15px; text-align: center;">
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSdQpI5B9_CCZMzDFuoNXjPT20BkeR31qdTxPn1ckoiRDDNSTw/viewform" target="_blank" style="color: #1a1a1a; text-decoration: underline;" rel="noopener">
                            Or fill out our detailed signup form here
                        </a>
                    </p>
                </section>
            </div>
        </section>

        <!-- Holiday Banner -->
        <section class="holiday-banner" aria-label="Holiday gift announcement">
            <div class="container">
                <p>Pre-Order Holiday Gift Boxes Now Available!</p>
                <a href="gift-shop.html" class="holiday-cta">Shop Holiday Gifts</a>
            </div>
        </section>

        <section id="story" class="family-story" aria-label="Our family story">
            <div class="container">
                <!-- Origin Story -->
                <article class="origin-story">
                    <h3>How It All Started</h3>
                    <p>When our youngest was born, he had severe allergies, and we thought a little local honey could help. It really began with a love of fresh seasonal food and a book called "How to Grow a Little Fruit Tree" by Ann Ralph.</p>
                    
                    <p>After planting a few trees on a steep hill, we realized they would benefit from pollinators. Learning a little bit at a time, we grew from 1 hive and a few trees to adding early, mid and late-season varieties of most types of fruit trees.</p>
                    
                    <div class="highlight-box">
                        <p><strong>One fun fact:</strong> We got bees and chickens the same weekend! Dad always hoped to try having chickens, but after mom learned about a store that would let you buy chicks and sell them back after helping them grow to about 12 weeks old, the stakes were low. When she said she was potentially interested, Dad wanted to move on it immediately before any chance for a change of heart!</p>
                        
                        <p>Coincidentally, when Dad first learned about bees, the season to start was only 2 weeks away... and the nucleus happened to be ready that same weekend! Spring 2024 was a particularly busy time :)</p>
                    </div>
                    
                    <p>Now we have cherries, apricots, peaches, persimmons, avocados, blueberries, guava, pears, apples, berries, grapes, figs, citrus and some unusual fruits like jostaberries and Dad's childhood favorite Cherimoya. The goal of this project is to help the boys foster a love for working with their hands, putting roots into their community and developing appreciation for the world around them.</p>
                </article>

                <article class="story-grid">
                    <div class="story-text">
                        <h3>Meet the Family</h3>
                        <p>The O-Boys, Minnie, and Dan, along with their loyal dog Oreo, have created something special on their Oakland farm. With 10 happy chickens, 5 thriving beehives, and 50+ diverse fruit trees, every day is an adventure in sustainable living.</p>
                        <p>Now the boys love their "Fluffies" - which are our two silkie chickens, and our bees are surprisingly sweet. Our children are hands-on in every aspect - from gathering eggs and harvesting honey to helping bake fresh goods and tend to our fruit trees.</p>
                    </div>
                    <div class="story-image">
                        <img src="images/boys-beesuits.jpg" alt="Two children wearing bee suits standing next to beehives on the family farm" loading="lazy">
                    </div>
                </article>

                <article class="story-grid">
                    <div class="story-image">
                        <img src="images/oreo-and-coop.jpeg" alt="Family dog Oreo sitting next to the chicken coop with children feeding chickens in the background" loading="lazy">
                    </div>
                    <div class="story-text">
                        <h3>Our First Business Adventure</h3>
                        <p>Our first year of beekeeping had a surprisingly good harvest. Outside of gifting to friends and family, our first entrepreneurial customer we hoped to partner with was our local gas station. When we approached them with a business proposal to display our jars and split the profits 50/50... their first question was "how much honey do you have?" - but they just wanted it for themselves!</p>
                        <p>This is when we knew this would be a fun family adventure! Every afternoon we collect eggs and help improve something on the farm - feeding leftovers to the chickens, weeding, or taking care of the plants. The kids have learned everything from bee communication through waggle dances to understanding why biodiversity helps our orchard thrive.</p>
                    </div>
                </article>

                <section class="farm-features" aria-label="Farm features">
                    <div class="feature">
                        <h4>6 Beehives</h4>
                        <p>Producing pure, raw honey while supporting local pollination and teaching us about these amazing insects</p>
                    </div>
                    
                    <div class="feature">
                        <h4>12 Happy Chickens</h4>
                        <p>Including our beloved "Fluffy" silkies, providing fresh, nutritious eggs daily while teaching responsibility and animal care</p>
                    </div>
                    
                    <div class="feature">
                        <h4>50+ Fruit Trees</h4>
                        <p>A diverse orchard including unusual varieties like jostaberries and Cherimoya, providing seasonal abundance year-round</p>
                    </div>
                </section>
            </div>
        </section>

        <!-- FAQ Section -->
        <section class="faq-section" id="faq" aria-label="Frequently asked questions">
            <div class="container">
                <h3 style="font-size: 2rem; color: #1a1a1a; text-align: center; margin-bottom: 40px; font-weight: 300; letter-spacing: 1px;">Frequently Asked Questions</h3>
                
                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFAQ(this)" aria-expanded="false">
                        How fresh are the eggs?
                        <span aria-hidden="true">+</span>
                    </button>
                    <div class="faq-answer">
                        Our eggs are collected daily from our happy free-range chickens. We gather them every morning and they're never more than 1-2 days old when delivered to you.
                    </div>
                </div>

                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFAQ(this)" aria-expanded="false">
                        Is the honey really raw and unfiltered?
                        <span aria-hidden="true">+</span>
                    </button>
                    <div class="faq-answer">
                        Yes! Our honey is completely raw and unfiltered. We only strain out any wax particles but leave all the beneficial enzymes, pollen, and nutrients intact.
                    </div>
                </div>

                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFAQ(this)" aria-expanded="false">
                        Can I visit the farm?
                        <span aria-hidden="true">+</span>
                    </button>
                    <div class="faq-answer">
                        We love visitors! Farm pickup days (first Sunday of each month, 9-11am) include complimentary coffee, waffles, and a chance to meet our animals. For other times, please contact us to arrange a visit.
                    </div>
                </div>

                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFAQ(this)" aria-expanded="false">
                        What if I have food allergies?
                        <span aria-hidden="true">+</span>
                    </button>
                    <div class="faq-answer">
                        Please let us know about any allergies in the special requests section when ordering. We can accommodate most dietary restrictions and will work with you to customize your box.
                    </div>
                </div>
            </div>
        </section>


        <section id="mission" class="mission" aria-label="Our mission">
            <div class="container">
                <h3>Our Mission</h3>
                <p>Chickabees Honey is more than a family business - it's our way of teaching the O-Boys about entrepreneurship, the value of hard work, and financial responsibility. Every jar of honey sold and every egg gathered contributes to their education fund and Roth IRA.</p>
                <p>We believe in creating an organic, sustainable, healthy food system while inspiring our community to eat well, learn about animals and plants, and build connections rooted in kindness, altruism, and joy. Through sharing our journey, we hope to inspire other families to discover their own path to sustainable living and meaningful learning.</p>
            </div>
        </section>
    </main>

    <footer role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Contact Us</h4>
                    <p>Oakland, CA</p>
                    <p><a href="mailto:hello@chickabeesoakland.com">hello@chickabeesoakland.com</a></p>
                </div>
                
                <div class="footer-section">
                    <h4>Pickup Hours</h4>
                    <p>First Sunday of Each Month</p>
                    <p>9:00 AM - 11:00 AM</p>
                    <p>Coffee & Waffles Included</p>
                </div>
                
                <div class="footer-section">
                    <h4>Follow & Delivery</h4>
                    <p><a href="https://instagram.com/chickabeesoakland" target="_blank" rel="noopener">@chickabeesoakland</a></p>
                    <p>Free within 15 min drive</p>
                    <p>$20 within 30 mins</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Chickabees Honey. Made with love by the family for the community.</p>
            </div>
        </div>
    </footer>

    <script>
        let selectedBox = '';
        let selectedPaymentMethod = '';
        let orderTotal = 0;
        let lastScrollTop = 0;
        let deferredPrompt;

        // PWA Installation handling
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            showInstallBanner();
        });

        function showInstallBanner() {
            const banner = document.getElementById('install-banner');
            banner.classList.add('show');
        }

        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    trackEvent('pwa_install_prompt', { choice: choiceResult.outcome });
                    deferredPrompt = null;
                    dismissInstall();
                });
            }
        }

        function dismissInstall() {
            const banner = document.getElementById('install-banner');
            banner.classList.remove('show');
            localStorage.setItem('installBannerDismissed', 'true');
        }

        // Check if banner was previously dismissed
        if (localStorage.getItem('installBannerDismissed')) {
            document.getElementById('install-banner').style.display = 'none';
        }

        // Toast notification system
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${type}`;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Live Chat functionality
        function openChat() {
            showToast('Chat feature coming soon! For now, please email us at hello@chickabeesoakland.com', 'info');
            trackEvent('chat_widget_clicked');
        }

        // FAQ functionality
        function toggleFAQ(button) {
            const answer = button.nextElementSibling;
            const isExpanded = button.getAttribute('aria-expanded') === 'true';
            const icon = button.querySelector('span');
            
            button.setAttribute('aria-expanded', !isExpanded);
            answer.classList.toggle('active');
            icon.textContent = isExpanded ? '+' : '−';
            
            trackEvent('faq_toggled', { question: button.textContent.trim() });
        }

        // Enhanced form validation functions
        function validateField(field) {
            const value = field.value.trim();
            const fieldName = field.id;
            let isValid = true;
            let errorMessage = '';
            let successMessage = '';

            // Clear previous messages
            hideError(fieldName);
            hideSuccess(fieldName);

            switch(fieldName) {
                case 'name':
                    if (!value) {
                        errorMessage = 'Name is required';
                        isValid = false;
                    } else if (value.length < 2) {
                        errorMessage = 'Name must be at least 2 characters';
                        isValid = false;
                    } else {
                        successMessage = '✓ Valid name';
                    }
                    break;
                case 'email':
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!value) {
                        errorMessage = 'Email is required';
                        isValid = false;
                    } else if (!emailRegex.test(value)) {
                        errorMessage = 'Please enter a valid email address';
                        isValid = false;
                    } else {
                        successMessage = '✓ Valid email';
                    }
                    break;
                case 'phone':
                    const phoneRegex = /^[\+]?[\d\s\-\(\)]{10,}$/;
                    if (!value) {
                        // Phone is now optional, so empty is valid
                        isValid = true;
                        errorMessage = '';
                        successMessage = '';
                    } else if (!phoneRegex.test(value)) {
                        errorMessage = 'Please enter a valid phone number';
                        isValid = false;
                    } else {
                        successMessage = '✓ Valid phone number';
                    }
                    break;
                case 'address':
                    const delivery = document.getElementById('delivery').value;
                    if (delivery === 'delivery' && !value) {
                        errorMessage = 'Delivery address is required';
                        isValid = false;
                    } else if (delivery === 'delivery' && value) {
                        successMessage = '✓ Address provided';
                    }
                    break;
            }

            if (!isValid) {
                showError(fieldName, errorMessage);
                trackEvent('form_validation_error', { field: fieldName, error: errorMessage });
            } else if (successMessage) {
                showSuccess(fieldName, successMessage);
            }

            return isValid;
        }

        function showError(fieldName, message) {
            const errorElement = document.getElementById(fieldName + '-error');
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.classList.add('show');
            }
        }

        function hideError(fieldName) {
            const errorElement = document.getElementById(fieldName + '-error');
            if (errorElement) {
                errorElement.classList.remove('show');
            }
        }

        function showSuccess(fieldName, message) {
            const successElement = document.getElementById(fieldName + '-success');
            if (successElement) {
                successElement.textContent = message;
                successElement.classList.add('show');
            }
        }

        function hideSuccess(fieldName) {
            const successElement = document.getElementById(fieldName + '-success');
            if (successElement) {
                successElement.classList.remove('show');
            }
        }

        // Add real-time validation
        document.addEventListener('DOMContentLoaded', function() {
            const fields = ['name', 'email', 'phone', 'address'];
            fields.forEach(fieldName => {
                const field = document.getElementById(fieldName);
                if (field) {
                    field.addEventListener('blur', () => validateField(field));
                    field.addEventListener('input', () => {
                        // Debounce validation
                        clearTimeout(field.validationTimeout);
                        field.validationTimeout = setTimeout(() => {
                            validateField(field);
                        }, 500);
                    });
                }
            });

            // Track form interactions
            trackEvent('page_view', { page: 'order_form' });
        });

        // Mobile menu toggle with accessibility
        document.getElementById('mobile-menu-toggle').addEventListener('click', function() {
            const nav = document.getElementById('navigation');
            const toggle = this;
            const isExpanded = toggle.getAttribute('aria-expanded') === 'true';
            
            nav.classList.toggle('active');
            toggle.classList.toggle('active');
            toggle.setAttribute('aria-expanded', !isExpanded);
            
            trackEvent('mobile_menu_toggle', { expanded: !isExpanded });
        });

        // Keyboard support for mobile menu
        document.getElementById('mobile-menu-toggle').addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                this.click();
            }
        });

        // Close mobile menu when clicking a link
        document.querySelectorAll('nav a').forEach(link => {
            link.addEventListener('click', function() {
                const nav = document.getElementById('navigation');
                const toggle = document.getElementById('mobile-menu-toggle');
                
                nav.classList.remove('active');
                toggle.classList.remove('active');
                toggle.setAttribute('aria-expanded', 'false');
            });
        });

        // Keyboard support for box selection
        function handleBoxKeydown(event, boxType) {
            if (event.key === 'Enter' || event.key === ' ') {
                event.preventDefault();
                selectBox(boxType);
            }
        }

        // Newsletter banner scroll functionality
        window.addEventListener('scroll', function() {
            const newsletter = document.getElementById('newsletter-banner');
            const currentScroll = window.pageYOffset || document.documentElement.scrollTop;
            
            // Hide newsletter when scrolling down, show when scrolling up
            if (currentScroll > lastScrollTop && currentScroll > 100) {
                // Scrolling down
                newsletter.classList.add('hidden');
            } else {
                // Scrolling up
                newsletter.classList.remove('hidden');
            }
            
            lastScrollTop = currentScroll <= 0 ? 0 : currentScroll;
        });

        function closeNewsletter() {
            document.getElementById('newsletter-banner').style.display = 'none';
            trackEvent('newsletter_banner_close');
        }

        function handleNewsletterSignup(location) {
            let emailInput, successElement;
            
            if (location === 'banner') {
                emailInput = document.getElementById('newsletter-email-banner');
                successElement = document.getElementById('newsletter-success-banner');
            } else {
                emailInput = document.getElementById('newsletter-email-input');
                successElement = document.getElementById('newsletter-success');
            }
            
            const email = emailInput.value;
            
            if (!email || email.indexOf('@') === -1) {
                showToast('Please enter a valid email address', 'error');
                emailInput.focus();
                return;
            }
            
            const url = 'https://docs.google.com/forms/d/e/1FAIpQLSdQpI5B9_CCZMzDFuoNXjPT20BkeR31qdTxPn1ckoiRDDNSTw/viewform?usp=pp_url&entry.1270002073=' + encodeURIComponent(email);
            window.open(url, '_blank', 'noopener');
            
            successElement.style.display = 'block';
            setTimeout(function() { 
                successElement.style.display = 'none'; 
            }, 5000);

            trackEvent('newsletter_signup', { location: location, email_domain: email.split('@')[1] });
        }

        function selectBox(boxType) {
            // Update ARIA states
            document.querySelectorAll('.box-option').forEach(box => {
                box.classList.remove('selected');
                box.setAttribute('aria-pressed', 'false');
            });
            
            const selectedElement = event.target.closest('.box-option');
            selectedElement.classList.add('selected');
            selectedElement.setAttribute('aria-pressed', 'true');
            
            selectedBox = boxType;
            selectedPaymentMethod = 'venmo'; // Auto-select Venmo since it's the only option
            updateCartWidget();
            updateOrderSummary();
            updateOrderButton();

            // Check if order is late and show warning
            const lateWarning = document.getElementById('late-order-warning');
            if (isOrderLate()) {
                lateWarning.style.display = 'block';
            } else {
                lateWarning.style.display = 'none';
            }

            // Announce selection to screen readers
            const statusElement = document.getElementById('order-btn-status');
            statusElement.textContent = `${boxType.charAt(0).toUpperCase() + boxType.slice(1)} box selected`;

            trackEvent('box_selected', { box_type: boxType });
            trackAddToCart({
                item_id: boxType,
                item_name: `${boxType.charAt(0).toUpperCase() + boxType.slice(1)} Box`,
                value: boxType === 'birds' ? 40 : 20
            });
            
            // Auto-scroll to next section after selection
            setTimeout(() => {
                const nextSection = document.querySelector('.form-group, .add-ons-section, #delivery');
                if (nextSection) {
                    nextSection.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                }
            }, 300); // Small delay to let selection animation complete
        }


        function updateCartWidget() {
            if (!selectedBox) return;
            
            const cartWidget = document.getElementById('cart-widget');
            const cartItems = document.getElementById('cart-items');
            const cartTotal = document.getElementById('cart-total');
            
            // Calculate totals
            let boxPrice = selectedBox === 'birds' ? 40 : 20;
            let addOnsTotal = 0;
            let items = [];
            
            // Add main box
            const boxName = selectedBox === 'birds' ? 'The Birds Box' : 'The Bees Box';
            items.push({
                name: boxName,
                price: boxPrice
            });
            
            // Add selected add-ons
            if (document.getElementById('extra-eggs-addon') && document.getElementById('extra-eggs-addon').checked) {
                addOnsTotal += 5;
                items.push({name: 'Extra 6 Eggs', price: 5});
            }
            if (document.getElementById('honey-10oz-addon') && document.getElementById('honey-10oz-addon').checked) {
                addOnsTotal += 10;
                items.push({name: 'Extra Honey 10oz', price: 10});
            }
            if (document.getElementById('sourdough-addon').checked) {
                addOnsTotal += 10;
                items.push({name: 'Sourdough Loaf', price: 10});
            }
            if (document.getElementById('babka-addon').checked) {
                addOnsTotal += 20;
                items.push({name: 'Chocolate Babka', price: 20});
            }
            if (document.getElementById('babka-slice-addon') && document.getElementById('babka-slice-addon').checked) {
                addOnsTotal += 3;
                items.push({name: 'Babka Slice', price: 3});
            }
            
            const total = boxPrice + addOnsTotal;
            
            // Update cart display
            cartItems.innerHTML = items.map(item => 
                `<div class="cart-item-row">
                    <span class="cart-item-name">${item.name}</span>
                    <span class="cart-item-price">$${item.price.toFixed(2)}</span>
                </div>`
            ).join('');
            
            cartTotal.textContent = total.toFixed(2);
            cartWidget.style.display = 'block';
            
            // Update global order total for other functions
            orderTotal = total;
            
            // Update payment amounts
            updatePaymentAmounts();
        }

        function updateOrderSummary() {
            if (!selectedBox) return;
            
            const delivery = document.getElementById('delivery').value;
            
            // Calculate base box price - new simplified pricing
            let boxPrice = selectedBox === 'birds' ? 40 : 20;
            
            // Calculate add-ons
            let addOnsTotal = 0;
            let addOnsList = [];
            
            // Check all add-ons
            if (document.getElementById('babka-addon').checked) {
                addOnsTotal += 20;
                addOnsList.push({name: 'Chocolate Babka', price: 20});
            }
            if (document.getElementById('babka-slice-addon') && document.getElementById('babka-slice-addon').checked) {
                addOnsTotal += 3;
                addOnsList.push({name: 'Babka Slice', price: 3});
            }
            if (document.getElementById('sourdough-addon').checked) {
                addOnsTotal += 10;
                addOnsList.push({name: 'Sourdough Loaf', price: 10});
            }
            if (document.getElementById('extra-eggs-addon').checked) {
                addOnsTotal += 5;
                addOnsList.push({name: 'Extra 6 Eggs', price: 5});
            }
            if (document.getElementById('honey-10oz-addon') && document.getElementById('honey-10oz-addon').checked) {
                addOnsTotal += 10;
                addOnsList.push({name: 'Extra Honey 10oz', price: 10});
            }
            
            // No discounts applied in current order (customers save items for next order)
            let discounts = 0;
            
            // Calculate delivery fee
            let deliveryFee = 0;
            if (delivery === 'delivery') {
                deliveryFee = 5; // Simplified delivery fee
            }
            
            // orderTotal is set by updateCartWidget() - don't override it here
            const calculatedTotal = boxPrice + addOnsTotal + deliveryFee - discounts;
            
            // Update order summary display
            const orderSummary = document.getElementById('order-summary');
            const orderDetails = document.getElementById('order-details');
            
            let orderHTML = `
                <div class="order-item">
                    <span class="item-name">${selectedBox.charAt(0).toUpperCase() + selectedBox.slice(1)} Box</span>
                    <span class="item-price">${boxPrice.toFixed(2)}</span>
                </div>
            `;
            
            addOnsList.forEach(addon => {
                orderHTML += `
                    <div class="order-item">
                        <span class="item-name">${addon.name}</span>
                        <span class="item-price">${addon.price.toFixed(2)}</span>
                    </div>
                `;
            });
            
            if (deliveryFee > 0) {
                orderHTML += `
                    <div class="order-item">
                        <span class="item-name">Delivery Fee</span>
                        <span class="item-price">${deliveryFee.toFixed(2)}</span>
                    </div>
                `;
            }
            
            orderHTML += `
                <div class="order-item" style="font-weight: 500; font-size: 1rem; color: #1a1a1a;">
                    <span class="item-name"><strong>Total</strong></span>
                    <span class="item-price"><strong>${orderTotal.toFixed(2)}</strong></span>
                </div>
            `;
            
            orderDetails.innerHTML = orderHTML;
            orderSummary.style.display = 'block';
            
            updatePaymentAmounts();
        }

        function updatePaymentAmounts() {
            const venmoAmount = document.getElementById('venmo-amount');
            const venmoTotal = document.getElementById('venmo-total');
            const pickupTotal = document.getElementById('pickup-total');
            
            if (venmoAmount) venmoAmount.textContent = orderTotal.toFixed(2);
            if (venmoTotal) venmoTotal.textContent = orderTotal.toFixed(2);
            if (pickupTotal) pickupTotal.textContent = orderTotal.toFixed(2);
        }

        function toggleDeliveryInfo() {
            const delivery = document.getElementById('delivery').value;
            const pickupInfo = document.getElementById('pickup-info');
            const deliveryInfo = document.getElementById('delivery-info');
            const addressGroup = document.getElementById('address-group');
            const addressField = document.getElementById('address');
            
            if (delivery === 'delivery') {
                pickupInfo.style.display = 'none';
                deliveryInfo.style.display = 'block';
                addressGroup.style.display = 'block';
                addressField.setAttribute('required', '');
            } else {
                pickupInfo.style.display = 'block';
                deliveryInfo.style.display = 'none';
                addressGroup.style.display = 'none';
                addressField.removeAttribute('required');
                hideError('address');
                hideSuccess('address');
            }
            
            updateOrderSummary();
            trackEvent('delivery_method_changed', { method: delivery });
        }

        function calculateNextPickupDate() {
            const now = new Date();
            const currentMonth = now.getMonth();
            const currentYear = now.getFullYear();
            
            // Always go to next month for main box orders
            const nextMonth = currentMonth === 11 ? 0 : currentMonth + 1;
            const nextYear = currentMonth === 11 ? currentYear + 1 : currentYear;
            
            // Find first Sunday of next month
            let firstSunday = new Date(nextYear, nextMonth, 1);
            while (firstSunday.getDay() !== 0) {
                firstSunday.setDate(firstSunday.getDate() + 1);
            }
            
            const monthNames = ["January", "February", "March", "April", "May", "June",
                "July", "August", "September", "October", "November", "December"];
            
            const dateString = `Sunday, ${monthNames[firstSunday.getMonth()]} ${firstSunday.getDate()}, 9-11am in Montclair Oakland`;
            
            return dateString;
        }

        function updatePickupSchedule() {
            const pickupDateElement = document.getElementById('next-pickup-date');
            if (pickupDateElement) {
                pickupDateElement.textContent = calculateNextPickupDate();
            }
        }

        function showPaymentOptions() {
            const paymentSection = document.getElementById('payment-options-section');
            if (paymentSection) {
                // Update all payment amounts with current total
                updatePaymentAmounts();
                
                // Update pickup dates
                const pickupDateDisplay = document.getElementById('pickup-date-display');
                const pickupDateLarge = document.getElementById('pickup-date-large');
                const nextPickupDate = calculateNextPickupDate();
                
                if (pickupDateDisplay) pickupDateDisplay.textContent = nextPickupDate;
                if (pickupDateLarge) pickupDateLarge.textContent = nextPickupDate;
                
                paymentSection.style.display = 'block';
                paymentSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            
            // Update card selections
            document.querySelectorAll('.payment-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            const selectedCard = document.querySelector(`.${method}-option`);
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }
            
            // Show payment details
            const detailsContainer = document.getElementById('payment-details-container');
            const venmoDetails = document.getElementById('venmo-details');
            const pickupDetails = document.getElementById('pickup-details');
            
            detailsContainer.style.display = 'block';
            
            if (method === 'venmo') {
                venmoDetails.style.display = 'block';
                pickupDetails.style.display = 'none';
            } else if (method === 'pickup') {
                venmoDetails.style.display = 'none';
                pickupDetails.style.display = 'block';
                
                // Update pickup amount
                const pickupAmountFinal = document.getElementById('pickup-amount-final');
                if (pickupAmountFinal) {
                    pickupAmountFinal.textContent = orderTotal.toFixed(2);
                }
            }
            
            updateOrderButton();
        }

        function updateOrderButton() {
            const orderBtn = document.getElementById('order-btn');
            
            if (selectedBox && selectedPaymentMethod) {
                orderBtn.disabled = false;
                orderBtn.textContent = `Place Order - $${orderTotal.toFixed(2)}`;
            } else {
                orderBtn.disabled = true;
                orderBtn.textContent = 'Select a Box to Continue';
            }
        }

        function getOrderDeadline() {
            const now = new Date();
            const currentMonth = now.getMonth();
            const currentYear = now.getFullYear();
            
            // Find first Sunday of next month
            let firstSunday = new Date(currentYear, currentMonth + 1, 1);
            while (firstSunday.getDay() !== 0) {
                firstSunday.setDate(firstSunday.getDate() + 1);
            }
            
            // Deadline is 3 days before first Sunday (Thursday)
            const deadline = new Date(firstSunday);
            deadline.setDate(deadline.getDate() - 3);
            
            return { deadline, firstSunday };
        }

        function isOrderLate() {
            const { deadline } = getOrderDeadline();
            const now = new Date();
            return now > deadline;
        }

        function processOrder() {
            // Show loading state
            const orderBtn = document.getElementById('order-btn');
            orderBtn.classList.add('loading');
            orderBtn.disabled = true;

            // Get form data
            const name = document.getElementById('name');
            const email = document.getElementById('email');
            const phone = document.getElementById('phone');
            const address = document.getElementById('address');
            const specialRequests = document.getElementById('special-requests').value;
            const delivery = document.getElementById('delivery').value;
            
            // Validate all fields
            let isValid = true;
            [name, email, phone, address].forEach(field => {
                if (field && !validateField(field)) {
                    isValid = false;
                }
            });

            // Check if box is selected
            if (!selectedBox) {
                showToast('Please select a box option', 'error');
                orderBtn.classList.remove('loading');
                orderBtn.disabled = false;
                return;
            }
            
            if (!isValid) {
                showToast('Please fix the errors in the form before submitting', 'error');
                orderBtn.classList.remove('loading');
                orderBtn.disabled = false;
                return;
            }
            
            // Track order attempt
            trackEvent('order_attempt', {
                box_type: selectedBox,
                delivery_method: delivery,
                order_total: orderTotal
            });
            
            // Collect add-ons info for email
            const addOns = [];
            if (document.getElementById('extra-eggs-addon') && document.getElementById('extra-eggs-addon').checked) {
                addOns.push('Extra 6 Eggs (+$5)');
            }
            if (document.getElementById('honey-10oz-addon') && document.getElementById('honey-10oz-addon').checked) {
                addOns.push('Extra Honey 10oz (+$10)');
            }
            if (document.getElementById('sourdough-addon').checked) {
                addOns.push('Sourdough Loaf (+$10)');
            }
            if (document.getElementById('babka-addon').checked) {
                addOns.push('Chocolate Babka (+$20)');
            }
            
            // Sustainability discounts now apply to next order (not current order)
            const discounts = [];
            
            // Prepare form data for Formspree
            const formData = new FormData();
            formData.append('name', name.value);
            formData.append('email', email.value);
            formData.append('phone', phone.value);
            formData.append('subject', 'Chickabees Fresh Box Order Confirmation');
            formData.append('box_type', selectedBox === 'birds' ? 'The Birds Box' : 'The Bees Box');
            formData.append('base_price', `$${selectedBox === 'birds' ? '40' : '20'}`);
            formData.append('add_ons', addOns.length > 0 ? addOns.join(', ') : 'None');
            formData.append('sustainability_discounts', discounts.length > 0 ? discounts.join(', ') : 'None');
            formData.append('total_amount', `$${orderTotal.toFixed(2)}`);
            formData.append('delivery_method', delivery);
            formData.append('payment_method', selectedPaymentMethod === 'venmo' ? 'Venmo (Pay Now)' : 'Pay at Pickup (Cash/Card)');
            formData.append('pickup_date', calculateNextPickupDate());
            formData.append('special_requests', specialRequests || 'None');
            if (address && address.value) {
                formData.append('delivery_address', address.value);
            }
            formData.append('payment_instructions', selectedPaymentMethod === 'venmo' ? 
                'Venmo: @chickabeesoakland - Please include your name in the payment note' : 
                'Payment due at pickup - we accept cash or tap-to-pay');
            formData.append('order_date', new Date().toLocaleDateString());
            formData.append('_replyto', email.value);
            formData.append('_subject', `New Fresh Box Order from ${name.value}`);
            
            // Submit to Formspree (using a new endpoint for main boxes)
            fetch('https://formspree.io/f/manbeeln', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            })
            .then(response => {
                if (response.ok) {
                    // Show success message
                    const successMessage = document.getElementById('success-message');
                    const successText = successMessage.querySelector('p');
                    
                    let confirmationText = '';
                    
                    if (selectedPaymentMethod === 'venmo') {
                        confirmationText = 'Thank you for supporting the O-Boys\' future! <strong>📧 Confirmation email sent</strong> with Venmo payment instructions. We\'ll contact you within 24 hours after payment to confirm your order and arrange delivery/pickup details.';
                    } else if (selectedPaymentMethod === 'pickup') {
                        const nextPickup = calculateNextPickupDate();
                        confirmationText = `Thank you for supporting the O-Boys\' future! <strong>📧 Confirmation email sent</strong> with order details. Your order is reserved for pickup on <strong>${nextPickup}</strong>. Payment due at pickup: <strong>$${orderTotal.toFixed(2)}</strong>.`;
                    } else {
                        confirmationText = 'Thank you for supporting the O-Boys\' future! <strong>📧 Confirmation email sent</strong> with order details. We\'ll contact you within 24 hours to confirm your order and arrange payment/delivery details.';
                    }
                    
                    if (isOrderLate()) {
                        confirmationText += '<br><br><strong>Note: Your order was placed after the Thursday deadline, so babka items may not be available until next month.</strong> We\'ll email you to confirm availability.';
                    }
                    
                    successText.innerHTML = confirmationText;
                    successMessage.classList.add('show');
                    document.getElementById('order-form').style.display = 'none';
                    
                    // Scroll to success message
                    successMessage.scrollIntoView({ behavior: 'smooth' });
                    
                    showToast('Order submitted successfully!', 'success');

                    // Track successful order with enhanced e-commerce data
                    const orderData = {
                        transaction_id: 'CB-' + Date.now(),
                        value: orderTotal,
                        items: [{
                            item_id: selectedBox,
                            item_name: `${selectedBox.charAt(0).toUpperCase() + selectedBox.slice(1)} Box`,
                            category: 'farm-provisions',
                            quantity: 1,
                            price: orderTotal
                        }]
                    };
                    
                    trackPurchase(orderData);
                    
                    console.log('Order processed:', {
                        name: name.value,
                        email: email.value,
                        phone: phone.value,
                        address: address ? address.value : null,
                        specialRequests,
                        selectedBox,
                        delivery,
                        selectedPaymentMethod,
                        orderTotal
                    });

                    orderBtn.classList.remove('loading');
                } else {
                    throw new Error('Form submission failed');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Sorry, there was an error submitting your order. Please try again or email us directly at hello@chickabeesoakland.com');
                
                // Reset loading state on error
                orderBtn.classList.remove('loading');
                orderBtn.disabled = false;
                orderBtn.textContent = `Place Order - $${orderTotal.toFixed(2)}`;
            });
        }

        function accessMembersPage() {
            // Placeholder for members-only access
            showToast('Members area coming soon! Sign up for our newsletter to be notified when it launches.', 'info');
            trackEvent('members_page_attempt');
        }

        // Track add-on selections
        document.addEventListener('change', function(e) {
            if (e.target.type === 'checkbox' && e.target.id.includes('-addon')) {
                const addonName = e.target.id.replace('-addon', '');
                trackEvent('addon_toggled', {
                    addon: addonName,
                    selected: e.target.checked,
                    price: parseFloat(e.target.value)
                });
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            selectedPaymentMethod = 'venmo'; // Auto-select Venmo since it's the only option
            updatePickupSchedule(); // Set the dynamic pickup date

            // Add touch event handling for better mobile experience
            if ('ontouchstart' in window) {
                document.querySelectorAll('.box-option, .add-on-item').forEach(element => {
                    element.addEventListener('touchstart', function() {
                        this.style.transform = 'scale(0.98)';
                    });
                    element.addEventListener('touchend', function() {
                        this.style.transform = 'scale(1)';
                    });
                });
            }

            // Service Worker registration for PWA
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW registered:', registration);
                        trackEvent('service_worker_registered');
                    })
                    .catch(error => {
                        console.log('SW registration failed:', error);
                    });
            }
        });

        // Performance monitoring
        window.addEventListener('load', function() {
            // Track Core Web Vitals
            if ('PerformanceObserver' in window) {
                try {
                    // First Contentful Paint
                    new PerformanceObserver((entryList) => {
                        for (const entry of entryList.getEntries()) {
                            trackEvent('performance_metric', {
                                metric: 'FCP',
                                value: Math.round(entry.startTime)
                            });
                        }
                    }).observe({entryTypes: ['paint']});

                    // Largest Contentful Paint
                    new PerformanceObserver((entryList) => {
                        const entries = entryList.getEntries();
                        const lastEntry = entries[entries.length - 1];
                        trackEvent('performance_metric', {
                            metric: 'LCP',
                            value: Math.round(lastEntry.startTime)
                        });
                    }).observe({entryTypes: ['largest-contentful-paint']});
                } catch (e) {
                    // Fallback for browsers that don't support these APIs
                    console.log('Performance monitoring not supported');
                }
            }
        });
    </script>
</body>
</html>